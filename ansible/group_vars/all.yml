# setup variable for cluster installation
# kubernetes dir
kube_config_dir: /etc/kubernetes
manifest_config_dir: /etc/kubernetes/manifests
cert_dir: /etc/kubernetes/pki
master_cert_dir: /opt/kubernetes/pki
kube_addon_dir: /etc/kubernetes/addon
weavedir: /etc/cni/net.d
flannel_dir: /etc/sysconfig

# Local IPs, should get this from facts/terraform

etcd_ips: ['172.20.2.103','172.20.1.180','172.20.0.100']
master_ips: ['172.20.2.103','172.20.1.180','172.20.0.100']
node_ips: ['172.20.2.247','172.20.0.244','172.20.1.186']

# Images and other variable
api_image: gcr.io/google_containers/kube-apiserver-amd64:v1.6.6
controller_image: gcr.io/google_containers/kube-controller-manager-amd64:v1.6.6
scheduler_image: gcr.io/google_containers/kube-scheduler-amd64:v1.6.6
kube_proxy_image: gcr.io/google_containers/kube-proxy-amd64:v1.6.6

# Cluster service ip range
service_ip_range: 100.64.0.0/12
kubernetes_service_ip: 100.64.0.1

# All certificates for cluster  
account_key: /etc/kubernetes/pki/apiserver-key.pem
ca_cert: /etc/kubernetes/pki/ca.pem
ca_key: /etc/kubernetes/pki/ca-key.pem
api_cert: /etc/kubernetes/pki/apiserver.pem
api_key: /etc/kubernetes/pki/apiserver-key.pem
admin_key: /etc/kubernetes/pki/admin-key.pem
admin_cert: /etc/kubernetes/pki/admin.pem
node_cert: /etc/kubernetes/pki/node.pem
node_key: /etc/kubernetes/pki/node-key.pem

# API secure port and api loadbalancer IP
# If not using LB pick an API server IP address
api_secure_port: 443
api_lb_ip: 'https://{{etcd_ips.0}}'
lb_ip: '{{etcd_ips.0}}'

# Kubeconfig file 
kubeletconfig: /etc/kubernetes/kubeletconfig
kubeadminconfig: /etc/kubernetes/kubeadminconfig

# Master fqdn names - required to create ssl certificate
masters_fqdn: ['ec2-54-72-225-72.eu-west-1.compute.amazonaws.com', 'ec2-34-252-46-209.eu-west-1.compute.amazonaws.com', 'ec2-52-17-215-75.eu-west-1.compute.amazonaws.com']

# Cluster dns name
cluster_name: voiceopsk8s

# API authorization ABAC
auth_mode: ABAC
auth_file: /etc/kubernetes/auth.csv
policy_file: /etc/kubernetes/policy.json

# Admin/readonly user password
admin_user: admin
admin_pass: AdminPass
readonly_user: readonly
readonly_pass: readonly

# kube-proxy addon
kube_proxy: true # set true only if cluster is fully operation and running

# kube-dns add-on
kube_dns: true # set true only if cluster is fully operation and running
# if true then set following
dns_ip: 100.64.0.10 # it should be from cluster service_ip_range
dns_replicas: 1

# weave ui port and IP
weave_net: false # set true only if cluster is fully operation and running
# if true then set following
weaveui_port: 90
weaveui_ip: '{{etcd_ips.0}}' # it should be one of cluster node IP

#flannel network # only one network plugin should be enable either weave or flannel
flannel: true
flannel_network: "10.10.0.0/16"
flannel_key: "/atomic.io/network"
flannel_subnet_len: 24

# A list of insecure registrys you might need to define
insecure_registrys:

# Turn to false to disable cluster monitoring with heapster and influxdb
cluster_monitoring: false # set true only if cluster is fully operation and running
#- if true then set following
heapster_ip: 100.64.0.11 # it should be from cluster service_ip_range
heapster_port: 80
grafana_ip: '{{etcd_ips.0}}' # it should be one of cluster node IP
grafana_port: 100
influx_ip: '{{etcd_ips.0}}' # it should be one of cluster node IP
influx_port: 8086

# Turn to false to disable the kube-dash addon for this cluster
kube_dash: true  # set true only if cluster is fully operation and running
#- if true then set following
kube_dash_ip: '{{etcd_ips.0}}' # it should be one of cluster node IP
kube_dash_port: 80

#- setup haproxy for loadbalancing
haproxy: true  # set false when already physical loadbalancer available
haproxy_dir: /etc/haproxy
haproxy_monitor_port: 9090
haadmin_user: admin
haadmin_password: admin123

#- etcd config
domain_name: test.com #- use to create wildcard ssl certificate for api and etcd
etcd_peer_url_scheme: http #- for http  or https
etcd_ca_file: "/etc/kubernetes/pki/ca.pem"
etcd_cert_file: "/etc/kubernetes/pki/etcd.pem"
etcd_key_file: "/etc/kubernetes/pki/etcd-key.pem"
etcd_peer_ca_file: "/etc/kubernetes/pki/ca.pem"
etcd_peer_cert_file: "/etc/kubernetes/pki/etcd.pem"
etcd_peer_key_file: "/etc/kubernetes/pki/etcd-key.pem"

#- proxy configuration of yum repositories
yum_proxy: "http://192.168.50.99:3128"
